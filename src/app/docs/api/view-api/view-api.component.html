<div class="container">

  <a class="btn btn-sm edit-page-btn" routerLink="edit" [hasPermission]="[permissions.API.UPDATE]" [hasPermissionTo]="entityPermissions.MODIFY" [entity]="api">
    <clr-icon shape="pencil" class="is-solid"></clr-icon> Edit API
  </a>

  <h1>
    {{ api.name }}
    <!-- <button class="ml20 btn btn-primary-outlined">Follow</button> -->
  </h1>

  <p class="bottom-spacer-20">{{ api.description }}</p>

  <h2>Overview</h2>

  <hr/>

  <div class="api-documentation-content" dynamicContentRouting [innerHtml]="overviewSafe"></div>

  <h2>Getting Started</h2>

  <hr/>

  <div class="api-documentation-content" dynamicContentRouting [innerHtml]="gettingStartedSafe"></div>

  <h2 id="api-documentation">
    API Documentation
    <clr-tooltip *ngIf="api.apiManagementTool">
        <a><clr-icon clrTooltipTrigger shape="key" size="30" class="ml10" (click)="openApiKeyModal()"></clr-icon></a>
        <clr-tooltip-content clrPosition="right" clrSize="sm" *clrIfOpen>
            <span>Get API Key</span>
        </clr-tooltip-content>
    </clr-tooltip>
  </h2>

  <apigee-api-key-modal *ngIf="api.apiManagementTool && api.apiManagementTool.name && api.apiManagementTool.name === 'APIGEE' " 
                        [opened]="apikeyModalOpen"
                        [api]="api"
  ></apigee-api-key-modal>

  <hr class="bottom-spacer-20"/>

  <!-- <swagger-ui class="bottom-spacer-40" [swaggerJson]="swaggerJson"></swagger-ui> -->

  <div id="swagger-ui"></div>

  <div id="swagger-editor"></div>

  <h2 id="api-reference">Reference</h2>
  
  <hr/>
  
  <div class="api-documentation-content" dynamicContentRouting [innerHtml]="referenceSafe"></div>

  <ng-container *ngIf="api.cid">
  <h2>API Forum</h2>

  <hr/>

  <a [routerLink]="'/forum/category/' + api.cid">{{ api.name }} Forum</a>  
  </ng-container>

</div>